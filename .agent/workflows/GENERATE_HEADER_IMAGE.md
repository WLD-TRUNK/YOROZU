---
description: READMEやリリースノート用の高品質なヘッダー画像を生成します
---
# 🎨 ヘッダー画像生成ワークフロー

このワークフローは、プロジェクト名を冠したエレガントで高品質なヘッダー画像をAIで生成し、スクリプトを用いて確実に16:9にクロップします。

## 手順1: 📝 プロンプト構築
- **プロジェクト名の取得**: カレントディレクトリやREADMEからプロジェクト名を取得します。
- **スタイル選択**:
  - **標準**: プロジェクト名を冠したエレガントなデザイン。
  - **YOROZU（雅/Miyabi）**: 和風、金箔、藍色（Indigo）、伝統文様（和柄）、ミニマリストな高級感を重視。
- **プロンプト作成**:
  - テキスト: **「画像を生成するプロンプト自体にそのリポジトリの名前（英字表記）を含める」** ことで、より自然な統合を目指します（例: 「英字の 'MyRepoName' を上品に配置する」）。
    - **重要**: 画像内の文字は英字のみとし、漢字・ひらがな・カタカナを含めないことを明記します。
  - **言語**: プロンプト本文は日本語で記述し、英字はリポジトリ名など必要箇所のみに限定します。
  - 配置: **「絶対に中央配置」** を強調します。
  - 構成: 上下がクロップされることを前提に、重要な要素を中央の帯状の領域に集中させます。

## 手順2: 🎨 画像生成 // 高速
- `generate_image` ツールを使用して画像を生成します。
  - **リトライ**: エラーが発生したり、予期せぬ結果が出た場合は、最大 **5回** までリトライしてください。
- **フォールバック**: 5回のリトライ後も失敗する場合は、以下の手順でスクリプト実行に切り替えます。
  1. コマンド `node .agent/scripts/GENERATE_IMAGE.js --prompt "..." --aspect-ratio "16:9" --output-format "png"` を実行します（プロンプトは手順1で作成したものを使用）。
  - 構成: 上下がクロップされることを前提に、重要な要素を中央の帯状の領域に集中させます。

## 手順2: 🎨 画像生成 // 高速
- `generate_image` ツールを使用して画像を生成します。
  - **リトライ**: エラーが発生したり、予期せぬ結果が出た場合は、最大 **5回** までリトライしてください。
- **フォールバック**: 5回のリトライ後も失敗する場合は、以下の手順でスクリプト実行に切り替えます。
  1. コマンド `node .agent/scripts/GENERATE_IMAGE.js --prompt "..." --aspect-ratio "16:9" --output-format "png"` を実行します（プロンプトは手順1で作成したものを使用）。
  2. スクリプトの出力から画像URL（例: `Image 1: https://...`、正規表現 `Image \d+: (https?://\S+)`）を取得します。
  3. そのURLから画像をダウンロードし、一時ファイル `.agent/assets/header_temp.png` として保存します（`curl` や `wget`、`Invoke-WebRequest`、またはブラウザツールを使用可能）。
- プロンプトには「16:9構図を正方形に圧縮して中央に寄せる」といった指示を含め、生成モデルが要素を中央に寄せるように誘導します。（ツール・スクリプト共通）

