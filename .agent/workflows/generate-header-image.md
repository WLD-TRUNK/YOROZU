---
description: READMEやリリースノート用の高品質なヘッダー画像を生成します
---
# 🎨 ヘッダー画像生成ワークフロー

このワークフローは、プロジェクト名を冠したエレガントで高品質なヘッダー画像をAIで生成し、スクリプトを用いて確実に16:9にクロップします。

## Step 1: 📝 プロンプト構築
- **プロジェクト名の取得**: カレントディレクトリやREADMEからプロジェクト名を取得します。
- **スタイル選択**:
  - **Standard**: プロジェクト名を冠したエレガントなデザイン。
  - **YOROZU (Miyabi)**: 和風、金箔、藍色（Indigo）、伝統文様（和柄）、ミニマリストな高級感を重視。
- **プロンプト作成**:
  - テキスト: **「画像を生成するプロンプト自体にそのリポジトリの名前（英語表記）を含める」** ことで、より自然な統合を目指します（例: "Text 'MyRepoName' elegantly displayed..."）。
    - **重要**: 漢字や誤った文字生成を防ぐため、プロンプトには "NO Kanji, Hiragana, Katakana" と明記します。
  - 配置: **「絶対に中央配置 (Perfectly Centered)」** を強調します。
  - 構成: 上下がクロップされることを前提に、重要な要素を中央の帯状の領域に集中させます。

## Step 2: 🎨 画像生成 // turbo
- `generate_image` ツールを使用して画像を生成します。
  - **リトライ**: エラーが発生したり、予期せぬ結果が出た場合は、最大 **5回** までリトライしてください。
- **フォールバック**: 5回のリトライ後も失敗する場合は、以下の手順でスクリプト実行に切り替えます。
  1. コマンド `node scripts/generate_image.js --prompt "..." --aspect-ratio "16:9" --output-format "png"` を実行します（プロンプトはStep 1で作成したものを使用）。
  2. スクリプトの出力から画像URL（例: `Image 1: https://...` by regex `Image \d+: (https?://\S+)`）を取得します。
  3. そのURLから画像をダウンロードし、一時ファイル `assets/header_temp.png` として保存します（`curl` や `wget`、`Invoke-WebRequest`、またはブラウザツールを使用可能）。
- プロンプトには「16:9 composition squeezed into square」といった指示を含め、生成モデルが要素を中央に寄せるように誘導します。（ツール・スクリプト共通）
- 一時ファイル `assets/header_temp.png` として保存します。

## Step 3: ✂️ クロップ処理 // turbo
- `scripts/crop_header.ps1` を実行して、画像を 16:9 (1024x576) にクロップします。
  - 入力: `assets/header_temp.png`
  - 出力: `assets/header.png`
- このスクリプトはDPIを考慮し、画像の中央部分を正確に切り出します。
- クロップ完了後、一時ファイルを削除します。

## Step 4: 💾 完了と保存
- 生成に使用したプロンプトを `assets/header_prompt.txt` に保存します。
- `README.md` のヘッダー画像リンクが有効であることを確認します。

