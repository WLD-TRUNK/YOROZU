---
description: Draw.io XMLでプロジェクトの論理構成図を生成する（AI生成）
---

このワークフローは、AIがリポジトリの内容を解析し、アーキテクチャ図（Draw.io形式）を生成・保存します。

1. **プロジェクトの解析**
   - `list_dir` や `view_file` ツールを使用して、プロジェクトの構造、主要なファイル（README.md, package.json, 主要スクリプト等）を確認してください。
   - アプリケーションの目的、主要なコンポーネント、データの流れ、依存関係を特定してください。
   - **重要**: 物理的なファイル構造ではなく、READMEやドキュメントから読み取れる**論理的な概念**（司令塔（Mission Control）、工場（Factory）、脳（Brain）など）を優先してください。

2. **Draw.io XMLの生成**
   - 解析した情報を基に、Draw.ioで読み込み可能なXMLテキストを生成してください。
   - **デザイン要件（厳格条件）**:
    - **言語**: **日本語** で統一してください（固有名詞・技術用語は英語併記可）。
     - **スタイル**: **「和風（雅）」なカラーパレット**を使用し、洗練されたプロフェッショナルな図にしてください。
       - *推奨カラー*: 藍色（Indigo `#2B4B6F`）, 朱色（Vermilion `#D35400`）, 抹茶色（Matcha `#7D8F69`）, からし色（Mustard `#E3B505`）, 桜色（Sakura `#FAD7E0`）, 漆黒（Lacquer Black `#2C3E50`）など。
       - 原色（真っ赤、真っ青）は避け、落ち着いたトーンを使用すること。
       - **グラデーション禁止（フラットデザインのみ）**: `gradientColor=none` を指定し、フラットなデザインにすること。
     - **構成**:
       - **ブロック図**: コンテナやスイムレーンを使用して明確な境界を示す。
       - **フロー**: データの流れを矢印で分かりやすく繋ぐ。
       - **余白（余白の美）**:
         - **要素間は十分な余白（最低40px以上）を取ること。**
         - コンテナ内部のパディングも広めに取り、窮屈な印象を与えないこと。
         - 全体的にゆったりとした配置にすること。
     - **形式**: 完全で有効なXML形式（`<mxfile>`〜`</mxfile>`）。

3. **ファイルの保存**
- 生成したXMLコンテンツを `.agent/assets/architecture/YOROZU_ARCHITECTURE.drawio` というファイル名で保存してください。
     - ※ `.agent/assets/architecture` が存在しない場合は、作成してから保存してください。
   - 保存完了後、ユーザーに通知してください。

4. **（任意）画像のエクスポートと埋め込み**
- 生成された `YOROZU_ARCHITECTURE.drawio` をDraw.ioで開き、スタイルを微調整した上で **SVG形式** としてエクスポート（`.agent/assets/architecture/YOROZU_ARCHITECTURE.svg`）することを推奨します。
   - SVG画像は `README.md` の構成図セクションに埋め込むことで、視覚的なドキュメントとして機能します。
